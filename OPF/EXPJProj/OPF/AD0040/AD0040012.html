<%-- ********************************************************
Copyright (c) 2003-2004 NEC Corporation
Copyright (c) 2003-2004 NEC Informatec Systems,Ltd.

作業実績メンテナンスサブ２
$Source: D:/EXPJCVS/EXPJPROJ/expjprsaUV2/EXPJProj/OPF/AD0040/AD0040012.html,v $
$Author: geng-jia $	
$Revision: 1.11 $ $Date: 2017/02/21 07:13:51 $
********************************************************* --%>
<html>
<head>
<title>作業実績メンテナンスサブ２</title>
<%@include file="common/expj_v5.jsp" %>
</head>
<body flash="true" name="AD0040012" version="AD0040012 $Revision: 1.11 $" onLoad="onInitializeOnLoad()" bgcolor="#000000" topmargin="0" bottommargin="0" leftmargin="0" rightmargin="0" widthResize="true" heightResize="1">
 <% String callButton = aAD0040010Control.getButton(); %>

  <table width="968" bgcolor="white" class="back" height="590" border="0" cellspacing="0" cellpadding="0">
    <tr height="5"> 
      <td colspan="3" width="968" height="5"></td>
    </tr>
    <tr height="538"> 
      <td width="5" height="538"></td>
      <td valign="top" width="958"> 
        <table width="958" border="0" cellspacing="0" cellpadding="0">
          <tr height="12"> 
            <td width="12" height="12" class="frame01"></td>
            <td colspan="3" height="12" class="frame02"></td>
            <td width="12" height="12" class="frame03"></td>
          </tr>
          <tr> 
            <td width="12" class="frame04"></td>
            <td colspan="3" class="frame05"> 
              <!-- ここに上段検索条件用のDataGridを配置する。↓ -->
              <table orftype="DataGrid" mode="FORM" name="AD0040012form1" width="934" height="494" border="1" cellspacing="0" cellpadding="0"
                 script1="onLoad;0;CALL;onDecision@0,1,2,3,4,5"
                 script2="onDecision;0;CHKRQ;A,B@*0,*2"
                 script3="child;0;CHK;<%=TypeConverter.sanitizer(callButton)%>[eq]UseParts[or]<%=TypeConverter.sanitizer(callButton)%>[eq]Insert12@*1,*2"
                 script4="child;1;UNMASK;_AD0040012button1/Insert12"
                 script5="child;2;MASK;_AD0040012button1/Insert12"
                 script6="onDecision;1;CHKRQ;B@*3,*5"
                 script7="child;3;CHK;<%=TypeConverter.sanitizer(callButton)%>[eq]NoUserParts[or]<%=TypeConverter.sanitizer(callButton)%>[eq]Update12@*4,*5"
                 script8="child;4;UNMASK;_AD0040012button1/Update12"
                 script9="child;5;MASK;_AD0040012button1/Update12"
                 script10="onDecision;2;CHK;<%=TypeConverter.sanitizer(callButton)%>[eq]UseParts[or]<%=TypeConverter.sanitizer(callButton)%>[eq]Insert12@*6,*7"
                 script11="child;6;UNMASK;_ITEM_CD,_PeekerItemCd"
                 script12="child;7;MASK;_ITEM_CD,_PeekerItemCd"
                 script13="onDecision;3;CHK;_AD0040012form1/TIME_CTRL[eq]true@*8,*9"
                 script14="child;8;UNMASK;_AD0040012form1/RCV_ISSUE_TIME"
                 script15="child;9;MASK;_AD0040012form1/RCV_ISSUE_TIME"
				 script16="onDecision;4;CHK;_AD0040012form1/h_SYS_LOT_CTRL_FLG[eq]true@*10,*13"
				 script17="child;10;CHK;<%=TypeConverter.sanitizer(callButton)%>[eq]UseParts[or]<%=TypeConverter.sanitizer(callButton)%>[eq]Insert12@*11,*12"
                 script18="child;11;UNMASK;_LOT_NO,_PeekerLotNo"
                 script19="child;12;CHK;_AD0040012form1/h_LOT_NO[eq]@*11,*13"
                 script20="child;13;MASK;_LOT_NO,_PeekerLotNo"
				 script21="onDecision;5;SET;_d1_STOCK_UNIT=_STOCK_UNIT,_d2_STOCK_UNIT=_STOCK_UNIT,_d3_STOCK_UNIT=_STOCK_UNIT"
              >
                <orloophead> 
                <tr bgcolor="#ccff99"> 
                  <td width=170 align=right>&nbsp;</td>
                  <td width=150 align=left>&nbsp;</td>
                  <td width=22 align=left>&nbsp;</td>
                  <td width=88 align=left>&nbsp;</td>
                  <td width=22 align=left>&nbsp;</td>
                  <td width=170 align=right>&nbsp;</td>
                  <td width=150 align=left>&nbsp;</td>
                  <td width=22 align=left>&nbsp;</td>
                  <td width=88 align=left>&nbsp;</td>
                </tr>
                </orloophead><ornoloop> 
                <tr> 
                  <td required=true><span orteus="true" mlang="true" mlkind="common" mlname="Expj.ITEM_CD_5">子品目番号</span></td>
                  <td><orftextinput  name="ITEM_CD" tablename="T_ISSUE_INST" columnname="ITEM_CD" dbtype="varchar2" tablejname="出庫指示" columnjname="出庫品目番号"   orteus="true" width="260"   maxlength="25" required="A"></orftextinput></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td><orfpeeker name="PeekerItemCd" value="" pattern="none" revokeCtrl="none" orteus="false" width="22" height="" lock="1" attribute="BTS_PEEKER" visible="" sqlname="ITEM_CD_10" sqlparam_1="_ITEM_CD"
 script1="onClick;0;PEEKER;_AD0040012form1/ITEM_CD@<%=contextNo%>"
></orfpeeker></td>
                  <td><orftextinput  name="ITEM_NAME" tablename="M_ITEM" columnname="ITEM_NAME" dbtype="varchar2" tablejname="品目" columnjname="品目名"   orteus="true" width="320" editable="false"></orftextinput></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                </tr>
                <tr> 
                  <td required=true><span orteus="true" mlang="true" mlkind="common" mlname="Expj.WH_CD_4">使用元保管区</span></td>
                  <td><orftextinput  name="WH_CD" tablename="T_ISSUE_INST" columnname="WH_CD" dbtype="varchar2" tablejname="出庫指示" columnjname="工程保管場所コード"   orteus="true" width="260" maxlength="25" required="B"></orftextinput></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td><orfpeeker  name="PeekerWhCd" value="" pattern="none" orteus="false" width="22" attribute="BTS_PEEKER"
                     script1="onClick;0;PEEKER;_AD0040012form1/WH_CD@<%=contextNo%>" 
                     sqlname="WH_CD_01" sqlparam_1=<%=aAD0040010Control.getsysPLANT_CD()%>   sqlparam_2="_WH_CD"></orfpeeker></td>
                  <td><orftextinput  name="WH_NAME" tablename="M_WH" columnname="WH_NAME" dbtype="varchar2" tablejname="保管区" columnjname="保管区名"   orteus="true" width="320" editable="false"></orftextinput></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                </tr>
                <tr> 
                  <td><span orteus="true" mlang="true" mlkind="common" mlname="Expj.JOB_ODR_CD_1">使用元製番</span></td>
                  <td><orftextinput  name="JOB_ODR_CD" tablename="T_OD" columnname="JOB_ODR_CD" dbtype="varchar2" tablejname="所要量" columnjname="製番"   orteus="true" width="260" maxlength="25"></orftextinput></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td><orfpeeker  name="PeekerJobOdrCd" value="" pattern="none" orteus="false" width="22" attribute="BTS_PEEKER"
                     script1="onClick;0;PEEKER;_AD0040012form1/JOB_ODR_CD@<%=contextNo%>" 
                     sqlname="JOB_ODR_CD_04" sqlparam_1=<%=aAD0040010Control.getsysPLANT_CD()%> sqlparam_2="_JOB_ODR_CD"></orfpeeker></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                </tr>
                <tr> 
                  <td><span orteus="true" mlang="true" mlkind="common" mlname="Expj.Cmt0320">計画使用数量</span></td>
                  <td><orftextinput  name="TEMP_PLAN_QTY" orteus="true" width="150" editable="false" 
                     kind="<%=Kind.convertNumeric(aAD0040010Struct.getUNIT_QTY_TYP(), Kind.N, 14, 1, Kind.FLOOR, 4)%>"></orftextinput></td>
                  <td><orftextinput  name="STOCK_UNIT" tablename="M_ITEM" columnname="STOCK_UNIT" dbtype="varchar2" tablejname="品目" columnjname="計量単位"   orteus="true" width="110" editable="false"></orftextinput></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                </tr>
                <tr> 
                  <td><span orteus="true" mlang="true" mlkind="common" mlname="Expj.Cmt0321">使用済数量</span></td>
                  <td><orftextinput  name="TEMP_USEOVER_QTY" orteus="true" width="150" editable="false" 
                     kind="<%=Kind.convertNumeric(aAD0040010Struct.getUNIT_QTY_TYP(), Kind.N, 14, 1, Kind.FLOOR, 4)%>"></orftextinput></td>
                  <td><orftextinput  name="d1_STOCK_UNIT" tablename="M_ITEM" columnname="STOCK_UNIT" dbtype="varchar2" tablejname="品目" columnjname="計量単位"   orteus="false" width="110" editable="false"></orftextinput></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                </tr>
                <tr> 
                  <td><span orteus="true" mlang="true" mlkind="common" mlname="Expj.Cmt0322">計画外使用済数量</span></td>
                  <td><orftextinput  name="TEMP_PLANOUT_QTY" orteus="true" width="150" editable="false" 
                     kind="<%=Kind.convertNumeric(aAD0040010Struct.getUNIT_QTY_TYP(), Kind.N, 14, 1, Kind.FLOOR, 4)%>"></orftextinput></td>
                  <td><orftextinput  name="d2_STOCK_UNIT" tablename="M_ITEM" columnname="STOCK_UNIT" dbtype="varchar2" tablejname="品目" columnjname="計量単位"   orteus="false" width="110" editable="false"></orftextinput></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                </tr>
                <tr> 
                  <td required=true><span orteus="true" mlang="true" mlkind="common" mlname="Expj.Cmt0323">更新使用数量</span></td>
                  <td><orftextinput  name="TEMP_USE_QTY" orteus="true" width="150" required="B"
                     kind="<%=Kind.convertNumeric(aAD0040010Struct.getUNIT_QTY_TYP(), Kind.N, 14, 1, Kind.FLOOR, 4)%>"></orftextinput></td>
                  <td><orftextinput  name="d3_STOCK_UNIT" tablename="M_ITEM" columnname="STOCK_UNIT" dbtype="varchar2" tablejname="品目" columnjname="計量単位"   orteus="false" width="110" editable="false"></orftextinput></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                </tr>
                <tr> 
                  <td required=true><span orteus="true" mlang="true" mlkind="common" mlname="Expj.RCV_ISSUE_DATE_1">使用日</span></td>
                  <td><orftextinput  name="RCV_ISSUE_DATE" tablename="T_RCV_ISSUE" columnname="RCV_ISSUE_DATE" dbtype="date" tablejname="保管区別入出庫" columnjname="入出庫年月日"   orteus="true" width="150"   kind="OBT_DATE;TYPE_YMD" required="B"></orftextinput></td>
                  <td><orfcalendar  name="CalendarRcvIssueDate" value="" pattern="none" orteus="false" width="22" attribute="BTS_CALENDAR"
                     script1="onClick;0;CALENDAR;_AD0040012form1/RCV_ISSUE_DATE"></orfcalendar></td>
                  <td><orftextinput name="RCV_ISSUE_TIME" orteus="true" width="88" editable="true" visible="true" password="false" text="" kind="OBT_N;" maxlength="4" required="" attribute=""
></orftextinput></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                </tr>
                <tr> 
                  <td><span orteus="true" mlang="true" mlkind="common" mlname="Expj.STOCK_LOT_CD">在庫ロット番号</span></td>
                  <td><orftextinput  name="LOT_NO" tablename="T_LOT_USE_RSLT" columnname="LOT_NO" dbtype="varchar2" tablejname="ロット別使用実績" columnjname="在庫ロット番号"   orteus="true" width="260" maxlength="25"></orftextinput></td>
                  <td><orftextinput name="h_SYS_LOT_CTRL_FLG" orteus="true" visible="false"></orftextinput></td>
                  <td>&nbsp;</td>
                  <td><orfpeeker name="PeekerLotNo" value="" pattern="none" revokeCtrl="none" orteus="false" width="22" height="" lock="1" attribute="BTS_PEEKER" visible="" sqlname="LOT_NO_12" sqlparam_1="_AD0040012form1/LOT_NO" sqlparam_2="_AD0040012form1/ITEM_CD" sqlparam_3="_AD0040012form1/WH_CD"
 script1="onClick;0;PEEKER;_AD0040012form1/LOT_NO::@<%=contextNo%>"
></orfpeeker></td>
                  <td><span orteus="true" mlang="true" mlkind="common" mlname="Expj.VEND_LOT_NO_1">製造ロット番号</span></td>
                  <td><orftextinput  name="VEND_LOT_NO" tablename="T_RCV_ISSUE" columnname="VEND_LOT_NO" dbtype="varchar2" tablejname="保管区別入出庫" columnjname="メーカロット番号"   orteus="true" width="260" maxlength="25"></orftextinput></td>
                  <td><orftextinput name="h_LOT_NO" orteus="true" width="" editable="false" visible="false" password="false" text="" kind="" maxlength="" required="" attribute=""
></orftextinput></td>
                  <td>&nbsp;</td>
                </tr>
                <tr> 
                  <td><span orteus="true" mlang="true" mlkind="common" mlname="Expj.RCV_ISSUE_COMMENT_2">備考</span></td>
                  <td><orftextinput  name="RCV_ISSUE_COMMENT" tablename="T_RCV_ISSUE" columnname="RCV_ISSUE_COMMENT" dbtype="varchar2" tablejname="保管区別入出庫" columnjname="入出庫備考"   orteus="true" width="712" maxlength="80"></orftextinput></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                </tr>
                <tr> 
                  <td><span orteus="true" mlang="true" mlkind="common" mlname="Expj.MRP_ODR_TYP_4">手配区分</span></td>
                  <td><orftextinput  name="MRP_ODR_TYP_DN" tablename="SYS_TYPE_VALUE" columnname="DISPLAY_NAME" dbtype="varchar2" tablejname="コンボボックスデータ" columnjname="表示説明"   orteus="true" width="260" editable="false"></orftextinput></td>
                  <td><orftextinput  name="MRP_ODR_TYP" orteus="true" visible="false"></orftextinput></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                </tr>
                <tr> 
                  <td><span orteus="true" mlang="true" mlkind="common" mlname="Expj.ISSUE_TYP_2">出庫指示出庫区分</span></td>
                  <td><orftextinput  name="ISSUE_TYP_DN" tablename="SYS_TYPE_VALUE" columnname="DISPLAY_NAME" dbtype="varchar2" tablejname="コンボボックスデータ" columnjname="表示説明"   orteus="true" width="260" editable="false"></orftextinput></td>
                  <td><orftextinput  name="h_ISSUE_TYP" orteus="true" visible="false"></orftextinput></td>
                  <td><orftextinput  name="TIME_CTRL" orteus="true" visible="false"></orftextinput></td>
                  <td><orftextinput  name="h_ITEM_MODIFY_COUNT" orteus="true" visible="false"></orftextinput></td>
                  <td><orftextinput  name="IN_OPR_INST_CD" tablename="T_OPR_RSLT" columnname="OPR_INST_CD" dbtype="varchar2" tablejname="作業実績" columnjname="作業指示番号"   orteus="true" visible="false"></orftextinput></td>
                  <td><orftextinput  name="PARTIAL_PRD_NO" tablename="T_OPR_RSLT" columnname="PARTIAL_PRD_NO" dbtype="number" tablejname="作業実績" columnjname="分作回数"   orteus="true" width="150" kind="OBT_INTEGER_P;6" visible="false"></orftextinput></td>
                  <td><orftextinput  name="h_ISSUE_INST_CD" tablename="T_ISSUE_INST" columnname="ISSUE_INST_CD" dbtype="number" tablejname="出庫指示" columnjname="出庫指示番号"   orteus="true" visible="false"></orftextinput></td>
                  <td><orftextinput  name="h_BUSINESS_OPR_DATE" orteus="true" visible="false"></orftextinput></td>
                </tr>
                </ornoloop> 
              </table>
              <!-- ここに上段検索条件用のDataGridを配置する。↑ -->
            </td>
            <td width="12" class="frame06"></td>
          </tr>
          <tr height="32"> 
            <td width="12" class="frame07" height="32"></td>
            <td width="664" class="frame08" height="32"></td>
            <td width="60" class="frame09" height="32"></td>
            <td width="210" class="frame10" height="32"> 
              <table orftype="DataGrid" mode="BUTTON" name="AD0040012button1" width="210" height="22" border="1" cellspacing="0" cellpadding="0">
                <orloophead> 
                <tr bgcolor="#ccff99"> 
                  <td width=105>&nbsp;</td>
                  <td width=105>&nbsp;</td>
                </tr>
                </orloophead><ornoloop> 
                <tr> 
                  <td><orfbutton name="Insert12" value="登録" pattern="insert" revokeCtrl="disabled" orteus="true" mlang="true" mlkind="common" mlname="Expj.BtnInsert" width="100" height="22" lock="1" attribute="" visible=""
 script1="onClick;0;CHK;_AD0040012form1/h_BUSINESS_OPR_DATE[lt]_AD0040012form1/RCV_ISSUE_DATE@#AD30773"
 script2="onClick;1;CHK;_AD0040012form1/TEMP_USE_QTY[numeq]0@#AD00030"
 script3="onClick;2;CHK;_AD0040012form1/TIME_CTRL[eq]true@*0"
 script4="onClick;3;CHK;_AD0040012form1/TIME_CTRL[eq]true[and]~LEN(_AD0040012form1/RCV_ISSUE_TIME)[eq]3@*1"
 script5="onClick;4;CHK;_AD0040012form1/TIME_CTRL[eq]true[and]~LEN(_AD0040012form1/RCV_ISSUE_TIME)[eq]4@*2"
 script6="onClick;5;SCRCHG;_AD0040012form1/*@AD0040010Servlet,,$ZZ07001"
 script7="child;0;CHK;~LEN(_AD0040012form1/RCV_ISSUE_TIME)[eq]1[or]~LEN(_AD0040012form1/RCV_ISSUE_TIME)[eq]2@#AS00045"
 script8="child;1;CHK;[{~CHARAT(_AD0040012form1/RCV_ISSUE_TIME:1)}*10+{~CHARAT(_AD0040012form1/RCV_ISSUE_TIME:2)}][gte]60@#AS00046"
 script9="child;2;CHK;[{~CHARAT(_AD0040012form1/RCV_ISSUE_TIME:0)}*10+{~CHARAT(_AD0040012form1/RCV_ISSUE_TIME:1)}][gte]24[or][{~CHARAT(_AD0040012form1/RCV_ISSUE_TIME:2)}*10+{~CHARAT(_AD0040012form1/RCV_ISSUE_TIME:3)}][gte]60@#AS00046"
></orfbutton></td>
                  <td><orfbutton name="Update12" value="更新" pattern="update" revokeCtrl="disabled" orteus="true" mlang="true" mlkind="common" mlname="Expj.BtnUpdate" width="100" height="22" lock="1" attribute="" visible=""
 script1="onClick;0;CHK;_AD0040012form1/h_BUSINESS_OPR_DATE[lt]_AD0040012form1/RCV_ISSUE_DATE@#AD30773"
 script2="onClick;1;CHK;_AD0040012form1/TEMP_USE_QTY[numeq]0@#AD00030"
 script3="onClick;2;CHK;_AD0040012form1/TIME_CTRL[eq]true@*0"
 script4="onClick;3;CHK;_AD0040012form1/TIME_CTRL[eq]true[and]~LEN(_AD0040012form1/RCV_ISSUE_TIME)[eq]3@*1"
 script5="onClick;4;CHK;_AD0040012form1/TIME_CTRL[eq]true[and]~LEN(_AD0040012form1/RCV_ISSUE_TIME)[eq]4@*2"
 script6="onClick;5;SCRCHG;_AD0040012form1/*@AD0040010Servlet,,$ZZ07003"
 script7="child;0;CHK;~LEN(_AD0040012form1/RCV_ISSUE_TIME)[eq]1[or]~LEN(_AD0040012form1/RCV_ISSUE_TIME)[eq]2@#AS00045"
 script8="child;1;CHK;[{~CHARAT(_AD0040012form1/RCV_ISSUE_TIME:1)}*10+{~CHARAT(_AD0040012form1/RCV_ISSUE_TIME:2)}][gte]60@#AS00046"
 script9="child;2;CHK;[{~CHARAT(_AD0040012form1/RCV_ISSUE_TIME:0)}*10+{~CHARAT(_AD0040012form1/RCV_ISSUE_TIME:1)}][gte]24[or][{~CHARAT(_AD0040012form1/RCV_ISSUE_TIME:2)}*10+{~CHARAT(_AD0040012form1/RCV_ISSUE_TIME:3)}][gte]60@#AS00046"
></orfbutton></td>
                </tr>
                </ornoloop> 
              </table>
            </td>
            <td width="12" class="frame11" height="32"></td>
          </tr>
        </table>
      </td>
      <td width="5"></td>
    </tr>
    <tr height="5"> 
      <td colspan="3" width="968" height="5"></td>
    </tr>
    <tr height="42"> 
      <td colspan="3" width="968" height="42" class="under"> 
        <table width="968" border="0">
          <tr> 
            <td align="left" width="863"></td>
            <td align="right" width="105"> 
              <table orftype="DataGrid" mode="BUTTON" name="AD0040012button0" width="105" height="22" border="1" cellspacing="0" cellpadding="0">
                <orloophead> 
                <tr bgcolor="#ccff99"> 
                  <td width=105>&nbsp;</td>
                </tr>
                </orloophead><ornoloop> 
                <tr> 
                  <td><orfbutton  name="Return12" value="戻る" pattern="none" orteus="true" mlang="true" mlkind="common" mlname="Expj.BtnReturn" width="100" height="22" 
                    script1="onClick;0;SCRCHG;_AD0040012form1/*@AD0040010Servlet,,$ZZ07013"
                    lock="0"></orfbutton></td>
                </tr>
                </ornoloop> 
              </table>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>

<%
MessageStruct msgStruct = aAD0040010Control.getMsgStruct();
%>
<%@include file="common/SetServerMessage.jsp" %>
</body>
</html>
