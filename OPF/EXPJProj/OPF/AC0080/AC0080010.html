<%-- ********************************************************
Copyright (c) 2003-2004 NEC Corporation
Copyright (c) 2003-2004 NEC Informatec Systems,Ltd.

外部計画一覧
$Source: D:/EXPJCVS/EXPJPROJ/expjprsaUV2/EXPJProj/OPF/AC0080/AC0080010.html,v $
$Author: geng-jia $	
$Revision: 1.7 $ $Date: 2017/02/13 02:34:09 $
********************************************************* --%>
<html>
<head>
<title>外部計画一覧</title>
<%@include file="common/expj_v5.jsp" %>
</head>
<body flash="true" name="AC0080010" version="AC0080010 $Revision: 1.7 $" onLoad="onInitializeOnLoad()" bgcolor="#000000" topmargin="0" bottommargin="0" leftmargin="0" rightmargin="0" widthResize="true" heightResize="2">

  <table width="968" bgcolor="white" class="back" height="590" border="0" cellspacing="0" cellpadding="0">
    <tr height="5"> 
      <td colspan="3" width="968" height="5"></td>
    </tr>
    <tr height="140"> 
      <td width="5" height="140"></td>
      <td valign="top" width="958"> 
        <table width="958" border="0" cellspacing="0" cellpadding="0">
          <tr height="12"> 
            <td width="12" height="12" class="frame01"></td>
            <td colspan="3" height="12" class="frame02"></td>
            <td width="12" height="12" class="frame03"></td>
          </tr>
          <tr> 
            <td width="12" class="frame04"></td>
            <td colspan="3" class="frame05"> 
              <table orftype="DataGrid" mode="FORM" name="AC0080010form1" width="934" height="96" border="1" cellspacing="0" cellpadding="0"
                     status="<%= TypeConverter.sanitizer(aAC0080010Control.getReadStatusString()) %>"

                     script1="onLoad;0;CALL;child@0,2,5,15"
                     script2="onLoad;1;CALL;onDecision@2,3"

                     script3="child;0;CHK;_AC0080010form1/w_OD_TYP[eq]2@*1"
                         script4="child;1;MASK;_AC0080010form1/c_UN_CONNECT_DEMAND"

                     script5="child;2;CHK;?AC0080010form1/*[eq]NORMAL@*3,*4"
                         script6="child;3;UNMASK;_AC0080010button2/choiceAll,_AC0080010button2/cancelAll"
                         script7="child;4;MASK;_AC0080010button2/choiceAll,_AC0080010button2/cancelAll"

                     script8="onDecision;0;CHK;1[eq]1@*5"
                     script9="child;5;CHKRQ;A@*6,*14"
                         script10="child;6;CHK;?AC0080010form1/*[eq]NORMAL@*7,*14"
                             script11="child;7;CHK;?AC0080010form1/w_PLANT_CD[eq]SAME@*8,*14"
                             script12="child;8;CHK;?AC0080010form1/w_ITEM_CD[eq]SAME@*9,*14"
                             script13="child;9;CHK;?AC0080010form1/w_DATE_FROM[eq]SAME@*10,*14"
                             script14="child;10;CHK;?AC0080010form1/w_DATE_TO[eq]SAME@*11,*14"
                             script15="child;11;CHK;?AC0080010form1/w_OD_TYP[eq]SAME@*12,*14"
                             script16="child;12;CHK;?AC0080010form1/c_UN_CONNECT_DEMAND[eq]SAME@*13,*14"
                                 script17="child;13;UNMASK;_AC0080010button0/csv"
                                 script18="child;14;MASK;_AC0080010button0/csv"

                     script19="onDecision;1;CHK;1[eq]1@*15"
                         script20="child;15;CHK;?AC0080010form1/*[eq]NORMAL@*16,*22"
                             script21="child;16;CHK;?AC0080010form1/w_PLANT_CD[eq]SAME@*17,*22"
                             script22="child;17;CHK;?AC0080010form1/w_ITEM_CD[eq]SAME@*18,*22"
                             script23="child;18;CHK;?AC0080010form1/w_DATE_FROM[eq]SAME@*19,*22"
                             script24="child;19;CHK;?AC0080010form1/w_DATE_TO[eq]SAME@*20,*22"
                             script25="child;20;CHK;?AC0080010form1/w_OD_TYP[eq]SAME@*21,*22"
                             script26="child;21;CHK;?AC0080010form1/c_UN_CONNECT_DEMAND[eq]SAME@*23,*22"
                                 script27="child;22;MASK;_AC0080010button2/delete"

                             script28="child;23;CHKRQ;?AC0080010view1/?[eq]SINGLE@*24,*25"
                                 script29="child;24;UNMASK;_AC0080010button2/delete"
                                 script30="child;25;CHKRQ;?AC0080010view1/?[eq]MULTI@*26,*27"
                                     script31="child;26;UNMASK;_AC0080010button2/delete"
                                     script32="child;27;MASK;_AC0080010button2/delete"

                     script33="onDecision;2;CHKRQ;A@*28,*29"
                         script34="child;28;UNMASK;_AC0080010button1/select"
                         script35="child;29;MASK;_AC0080010button1/select"
						 

					 script36="onDecision;3;CHK;_AC0080010form1/TIME_CTRL[eq]true@*30,*31"
					 script37="child;30;UNMASK;_AC0080010form1/w_TIME_FROM,_AC0080010form1/w_TIME_TO"
					 script38="child;31;MASK;_AC0080010form1/w_TIME_FROM,_AC0080010form1/w_TIME_TO"

              >
                <orloophead>
                <tr bgcolor="#ccff99">
                  <td width="170" align="right">&nbsp;</td>
                  <td width="150">&nbsp;</td>
                  <td width="22">&nbsp;</td>
                  <td width="88">&nbsp;</td>
                  <td width="22">&nbsp;</td>
                  <td width="150">&nbsp;</td>
                  <td width="20">&nbsp;</td>
                  <td width="150">&nbsp;</td>
                  <td width="22">&nbsp;</td>
                  <td width="88">&nbsp;</td>
                </tr>
                </orloophead><ornoloop>
                <tr>
                  <td required=true><span orteus="true" mlang="true" mlkind="common" mlname="Expj.ISSUE_PLANT_CD">工場コード</span></td>
                  <td><orftextinput  name="w_PLANT_CD" maxlength="2" orteus="true" width="260" required="A"></orftextinput></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td><orfpeeker  name="PeekerPlantCd" value="" pattern="none" orteus="false" width="22"
                     attribute="BTS_PEEKER"
                     script1="onClick;0;PEEKER;_AC0080010form1/w_PLANT_CD@<%=contextNo%>"
                     sqlname="PLANT_CD_01" sqlparam_1="_AC0080010form1/w_PLANT_CD"></orfpeeker></td>
                  <td><orftextinput  name="PLANT_NAME" tablename="M_PLANT" columnname="PLANT_NAME" editable="false" orteus="true" width="320"></orftextinput></td>
                  <td>&nbsp;</td>
                  <td><orftextinput  name="h_ODR_DMD_TYP" orteus="true" visible="false"></orftextinput></td>
                  <td><orftextinput  name="h_DEMAND_FLG" orteus="true" visible="false"></orftextinput></td>
                  <td><orftextinput  name="DOWNLOAD_FILE" orteus="true" visible="false"></orftextinput></td>
                </tr>
                <tr>
                  <td><span orteus="true" mlang="true" mlkind="common" mlname="Expj.ITEM_CD">品目番号</span></td>
                  <td><orftextinput  name="w_ITEM_CD" maxlength="25" orteus="true" width="260" kind="OBT_WILD"></orftextinput></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td><orfpeeker name="PeekerItemCd" value="" pattern="none" revokectrl="none" orteus="false" width="22" height="22" lock="0" attribute="BTS_PEEKER" visible="true" sqlname="ITEM_CD_01" sqlparam_1="_AC0080010form1/w_ITEM_CD"
 script1="onClick;0;PEEKER;_AC0080010form1/w_ITEM_CD@<%=contextNo%>"
></orfpeeker></td>
                  <td><span orteus="true" mlang="true" mlkind="common" mlname="Expj.Cmt0002">（ワイルドカード指定可）</span></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                </tr>
                <tr>
                  <td required=true><span orteus="true" mlang="true" mlkind="common" mlname="Expj.Cmt0420">生産計画期間</span></td>
                  <td><orftextinput  name="w_DATE_FROM" orteus="true" width="150" required="A" kind="OBT_DATE;TYPE_YMD"></orftextinput></td>
                  <td><orfcalendar  name="Calendarw_DATE_FROM" value="" pattern="none" orteus="false"
                        width=22
                        attribute="BTS_CALENDAR"
                        script1="onClick;0;CALENDAR;_AC0080010form1/w_DATE_FROM"></orfcalendar></td>
                  <td><orftextinput name="w_TIME_FROM" orteus="true" width="88" editable="true" visible="true" password="false" text="" kind="OBT_N;" maxlength="4" required="" attribute=""
></orftextinput></td>
                  <td align="center"><span orteus="true" mlang="true" mlkind="common" mlname="Expj.Cmt0043">〜</span></td>
                  <td><orftextinput  name="w_DATE_TO" orteus="true" width="150" required="A" kind="OBT_DATE;TYPE_YMD"></orftextinput></td>
                  <td><orfcalendar  name="Calendarw_DATE_TO" value="" pattern="none" orteus="false"
                        width=22
                        attribute="BTS_CALENDAR"
                        script1="onClick;0;CALENDAR;_AC0080010form1/w_DATE_TO"></orfcalendar></td>
                  <td><orftextinput name="w_TIME_TO" orteus="true" width="88" editable="true" visible="true" password="false" text="" kind="OBT_N;" maxlength="4" required="" attribute=""
></orftextinput></td>
                  <td><orftextinput name="TIME_CTRL" orteus="true" width="" editable="true" visible="false" password="false" text="" kind="" maxlength="" required="" attribute=""
></orftextinput></td>
                  <td>&nbsp;</td>
                </tr>
                <tr>
                  <td><span orteus="true" mlang="true" mlkind="common" mlname="Expj.OD_TYP">オーダデマンド区分</span></td>
                  <td><orfcombobox  name="w_OD_TYP" orteus="true" width="260"
                        script1="onDecision;0;CHK;1[eq]1@*0"
                        script2="child;0;CHK;_AC0080010form1/w_OD_TYP[eq]2@*1,*3"
                        script3="child;1;SET;_AC0080010form1/c_UN_CONNECT_DEMAND=false@*2"
                        script4="child;2;MASK;_AC0080010form1/c_UN_CONNECT_DEMAND"
                        script5="child;3;UNMASK;_AC0080010form1/c_UN_CONNECT_DEMAND"></orfcombobox>                  </td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td><orfcheckbox  name="c_UN_CONNECT_DEMAND" orteus="true" value="true" width="190" mlang="true" mlkind="common" mlname="Expj.Cmt0445"></orfcheckbox></td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                </tr>
                </ornoloop>
              </table>
            </td>
            <td width="12" class="frame06"></td>
          </tr>
          <tr height="32"> 
            <td width="12" class="frame07" height="32"></td>
            <td width="769" class="frame08" height="32"> </td>
            <td width="60" class="frame09" height="32"></td>
            <td width="105" class="frame10" height="32">
            <table orftype="DataGrid" mode="BUTTON" name="AC0080010button1" width="105" height="22" border="1" cellspacing="0" cellpadding="0">
              <orloophead>
              <tr bgcolor="#ccff99">
                  <td width=105>&nbsp;</td>
              </tr>
              </orloophead><ornoloop>
              <tr>
                <td><orfbutton name="select" value="読込" pattern="select" revokeCtrl="disabled" orteus="true" mlang="true" mlkind="common" mlname="Expj.BtnSelect" width="100" height="" lock="0" attribute="" visible=""
 script1="onClick;0;CHK;_AC0080010form1/w_DATE_FROM[gt]_AC0080010form1/w_DATE_TO@#AC10007"
 script2="onClick;1;CHK;_AC0080010form1/w_DATE_FROM[eq]_AC0080010form1/w_DATE_TO[and]_AC0080010form1/w_TIME_FROM[neq][and]_AC0080010form1/w_TIME_TO[neq][and]_AC0080010form1/w_TIME_FROM[gt]_AC0080010form1/w_TIME_TO@#AC10007"
 script3="onClick;2;CHK;~LEN(_AC0080010form1/w_TIME_FROM)[eq]1[or]~LEN(_AC0080010form1/w_TIME_FROM)[eq]2@#AS00123"
 script4="onClick;3;CHK;~LEN(_AC0080010form1/w_TIME_TO)[eq]1[or]~LEN(_AC0080010form1/w_TIME_TO)[eq]2@#AS00120"
 script5="onClick;4;CHK;_AC0080010form1/TIME_CTRL[eq]true[and]~LEN(_AC0080010form1/w_TIME_FROM)[eq]3@*0"
 script6="onClick;5;CHK;_AC0080010form1/TIME_CTRL[eq]true[and]~LEN(_AC0080010form1/w_TIME_TO)[eq]3@*1"
 script7="onClick;6;CHK;_AC0080010form1/TIME_CTRL[eq]true[and]~LEN(_AC0080010form1/w_TIME_FROM)[eq]4@*2"
 script8="onClick;7;CHK;_AC0080010form1/TIME_CTRL[eq]true[and]~LEN(_AC0080010form1/w_TIME_TO)[eq]4@*5"
 script9="onClick;8;SUBMIT;_AC0080010form1/*@AC0080010Servlet"
 script10="child;0;CHK;[{~CHARAT(_AC0080010form1/w_TIME_FROM:1)}*10+{~CHARAT(_AC0080010form1/w_TIME_FROM:2)}][gte]60@#AS00121"
 script11="child;1;CHK;[{~CHARAT(_AC0080010form1/w_TIME_TO:1)}*10+{~CHARAT(_AC0080010form1/w_TIME_TO:2)}][gte]60@#AS00122"
 script12="child;2;CHK;[{~CHARAT(_AC0080010form1/w_TIME_FROM:0)}*10+{~CHARAT(_AC0080010form1/w_TIME_FROM:1)}][gte]24@#AS00121,*3"
 script13="child;3;CHK;_AC0080010form1/TIME_CTRL[eq]true[and]~LEN(_AC0080010form1/w_TIME_FROM)[eq]4@*4"
 script14="child;4;CHK;[{~CHARAT(_AC0080010form1/w_TIME_FROM:2)}*10+{~CHARAT(_AC0080010form1/w_TIME_FROM:3)}][gte]60@#AS00121"
 script15="child;5;CHK;[{~CHARAT(_AC0080010form1/w_TIME_TO:0)}*10+{~CHARAT(_AC0080010form1/w_TIME_TO:1)}][gte]24@#AS00122,*6"
 script16="child;6;CHK;_AC0080010form1/TIME_CTRL[eq]true[and]~LEN(_AC0080010form1/w_TIME_TO)[eq]4@*7"
 script17="child;7;CHK;[{~CHARAT(_AC0080010form1/w_TIME_TO:2)}*10+{~CHARAT(_AC0080010form1/w_TIME_TO:3)}][gte]60@#AS00122"
></orfbutton>
                </td>
              </tr>
              </ornoloop>
            </table></td>
            <td width="12" class="frame11" height="32"></td>
          </tr>
        </table>
      </td>
      <td width="5" height="140"></td>
    </tr>
    <tr height="5"> 
      <td colspan="3" width="968" height="5"></td>
    </tr>
    <tr height="393"> 
      <td width="5" height="393"></td>
      <td valign="top" width="958" height="393"> 
        <table width="958" border="0" cellspacing="0" cellpadding="0">
          <tr height="12"> 
            <td width="12" height="12" class="frame01"></td>
            <td colspan="3" height="12" class="frame02"></td>
            <td width="12" height="12" class="frame03"></td>
          </tr>
          <tr> 
            <td width="12" class="frame04"></td>
            <td colspan="3" class="frame05"> 
              <table orftype="DataGrid" mode="VIEW" attribute="DGS_SELECTMULTI" name="AC0080010view1" width="934" height="349" border="1" cellspacing="0" cellpadding="0">
                <orloophead>
                <tr bgcolor="#ccff99">
                  <td hidden="true">&nbsp;</td>
                  <td hidden="true">&nbsp;</td>
                  <td hidden="true">&nbsp;</td>
                  <td hidden="true">&nbsp;</td>
                  <td width="100"><span orteus="true" mlang="true" mlkind="common" mlname="Expj.Cmt0434">外部計画番号</span></td>
                  <td width="200"><span orteus="true" mlang="true" mlkind="common" mlname="Expj.ITEM_CD">品目番号</span></td>
                  <td width="200"><span orteus="true" mlang="true" mlkind="common" mlname="Expj.ITEM_NAME">品目名</span></td>
                  <td width="115"><span orteus="true" mlang="true" mlkind="common" mlname="Expj.LIMIT">納期</span></td>
                  <td width="100" sorttype="numeric" align="right"><orfdata excell='true'></orfdata><span orteus="true" mlang="true" mlkind="common" mlname="Expj.ODR_QTY_1">手配数</span></td>
                  <td width="100"><span orteus="true" mlang="true" mlkind="common" mlname="Expj.OD_TYP">オーダデマンド区分</span></td>
                  <td width="100"><span orteus="true" mlang="true" mlkind="common" mlname="Expj.Cmt0446">オーダデマンド状態区分</span></td>
                  <td width="100"><span orteus="true" mlang="true" mlkind="common" mlname="Expj.OUTSIDE_TYP">内外作区分</span></td>
                </tr>
                </orloophead>
                <orloop>
                <tr>
<%
    String canSelect = "false";
    
    if(TypeConverter.sanitizer(aAC0080010Struct.geth_PARENT_OD_NO()) == null ||
       TypeConverter.sanitizer(aAC0080010Struct.geth_PARENT_OD_NO()).length() == 0 &&
       ("3").equals(TypeConverter.sanitizer(aAC0080010Struct.gets_OD_TYP())))
    {
        canSelect = "true";
    }
%>
                  <td rowselectable='<%= canSelect %>'><orflabel  name="EX_MODIFY_COUNT"   orteus="true" visible="false"></orflabel></td>
                  <td><orflabel  name="OD_MODIFY_COUNT"   orteus="true" visible="false"></orflabel></td>
                  <td><orflabel  name="h_OD_NO"   orteus="true" visible="false"></orflabel></td>
                  <td><orflabel  name="h_PARENT_OD_NO"   orteus="true" visible="false"></orflabel></td>
                  <td><orflabel  name="EXTERNAL_PLAN_CD"   orteus="true"></orflabel></td>
                  <td><orflabel  name="ITEM_CD"   orteus="true"></orflabel></td>
                  <td><orflabel  name="ITEM_NAME"   orteus="true"></orflabel></td>
                  <td><orflabel  name="PRD_DUE_DATE" orteus="true"></orflabel></td>
                  <td><orflabel  name="ODR_DM_QTY" kind="OBT_NUMBER_Z;14.1;FLOOR;4" orteus="true"></orflabel></td>
                  <td><orflabel  name="OD_TYP"   orteus="true"></orflabel></td>
                  <td><orflabel  name="w_STS_TYP"   orteus="true"></orflabel></td>
                  <td><orflabel  name="OUTSIDE_TYP"   orteus="true"></orflabel></td>
                </tr>
                </orloop>
              </table>
            </td>
            <td width="12" class="frame06"></td>
          </tr>
          <tr height="32"> 
            <td width="12" class="frame15" height="32"></td>
            <td width="315" class="frame10" height="32">
            <table orftype="DataGrid" mode="BUTTON" name="AC0080010button2" width="315" height="22" border="1" cellspacing="0" cellpadding="0">
              <orloophead>
              <tr bgcolor="#ccff99">
                <td width="105">&nbsp;</td>
                <td width="105">&nbsp;</td>
                <td width="105">&nbsp;</td>
              </tr>
              </orloophead><ornoloop>
              <tr>
                <td><orfbutton name="delete" value="選択削除" pattern="delete" revokeCtrl="disabled" orteus="true" mlang="true" mlkind="common" mlname="Expj.BtnDeleteAssort_1" width="100" height="" lock="1" attribute="" visible=""
 script1="onClick;0;SUBMIT;_AC0080010form1/*,_AC0080010view1/+@AC0080010Servlet,,$ZZ07004"
></orfbutton></td>
                <td><orfbutton name="choiceAll" value="全選択" pattern="none" revokeCtrl="disabled" orteus="true" mlang="true" mlkind="common" mlname="Expj.BtnCheckAll" width="100" height="" lock="0" attribute="" visible=""
 script1="onClick;0;DGSALL;AC0080010view1"
></orfbutton></td>
                <td><orfbutton name="cancelAll" value="全解除" pattern="none" revokeCtrl="disabled" orteus="true" mlang="true" mlkind="common" mlname="Expj.BtnCheckClear" width="100" height="" lock="0" attribute="" visible=""
 script1="onClick;0;DGSCANCEL;AC0080010view1"
></orfbutton></td>
              </tr>
              </ornoloop>
            </table> 
            </td>
            <td width="60" class="frame16" height="32"></td>
            <td width="559" class="frame08" height="32">　 </td>
            <td width="12" class="frame17" height="32"></td>
          </tr>
        </table>
      </td>
      <td width="5" height="393"></td>
    </tr>
    <tr height="5"> 
      <td colspan="3" width="968" height="5"></td>
    </tr>
    <tr height="42"> 
      <td colspan="3" width="968" height="42" class="under"> 
        <table width="968" border="0">
          <tr> 
            <td align="left" width="653"></td>
            <td align="right" width="315"> 
              <table orftype="DataGrid" mode="BUTTON" name="AC0080010button0" width="315" height="22" border="1" cellspacing="0" cellpadding="0">
                <orloophead> 
                <tr bgcolor="#ccff99"> 
                  <td width=105>&nbsp;</td>
                  <td width=105>&nbsp;</td>
                  <td width=105>&nbsp;</td>
                </tr>
                </orloophead><ornoloop> 
                <tr> 
                  <td><orfbutton name="csv" value="ＣＳＶ出力" pattern="print" revokeCtrl="disabled" orteus="true" mlang="true" mlkind="common" mlname="Expj.BtnCsvOut" width="100" height="" lock="0" attribute="" visible=""
 script1="onClick;0;SUBMIT;_AC0080010form1/*@AC0080010Servlet,,$ZZ07011"
></orfbutton></td>
                  <td><orfbutton  name="clear" value="クリア" pattern="none" orteus="true" mlang="true" mlkind="common" mlname="Expj.BtnClear" width="100" script1="onClick;0;SUBMIT;@AC0080010Servlet,,$ZZ07008" lock="0"></orfbutton></td>
                  <td><orfbutton  name="close" value="閉じる" pattern="none" orteus="false" mlang="true" mlkind="common" mlname="Expj.BtnClose" width="100" script1="onClick;0;CLOSE"></orfbutton></td>
                </tr>
                </ornoloop> 
              </table>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>

<%
MessageStruct msgStruct = aAC0080010Control.getMessage();
%>
<%@include file="common/SetServerMessage.jsp" %>
</body>
</html>
